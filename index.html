<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Python & MIPS Projects – Manish Kumar (GrizX4051k)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Manish Kumar (GrizX4051k)" />
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- Bootstrap 5.3 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!-- Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />

    <link rel="stylesheet" href="style.css" />
    <link
      rel="icon"
      type="image/png"
      href="https://avatars.githubusercontent.com/u/172516070?s=64"
    />
  </head>
  <body class="app-body">
    <!-- Glass navbar -->
    <nav
      class="navbar navbar-expand-lg navbar-dark app-nav border-bottom sticky-top"
    >
      <div class="container-fluid">
        <a class="navbar-brand d-flex align-items-center gap-2" href="#">
          <span class="brand-logo">MK</span>
          <span>Python &amp; MIPS – GrizX4051k</span>
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#mainNavbar"
          aria-controls="mainNavbar"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="mainNavbar">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" id="nav-home" href="#">Overview</a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="https://grizx4051k.github.io/Web-Development/"
                target="_blank"
                >Web Dev</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="https://grizx4051k.github.io/linux-lab-site/"
                target="_blank"
                >Linux</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="https://grizx4051k.github.io/C-Projects/"
                target="_blank"
                >C Projects</a
              >
            </li>
          </ul>

          <form class="d-flex app-search" role="search" id="search-form">
            <span class="search-icon"><i class="bi bi-search"></i></span>
            <input
              class="form-control app-search-input"
              type="search"
              placeholder="Search folders/files"
              aria-label="Search"
              id="search-input"
            />
          </form>
        </div>
      </div>
    </nav>

    <!-- Root switch + layout -->
    <div class="container-fluid mt-3">
      <div class="row">
        <!-- Left column: root tabs + tree + search results -->
        <div class="col-12 col-lg-3 app-sidebar border-end">
          <div class="d-flex align-items-center justify-content-between mb-2">
            <span class="text-uppercase small text-muted">Roots</span>
            <span class="badge bg-gradient-primary-subtle text-primary-emphasis"
              >Repo Browser</span
            >
          </div>

          <ul class="nav nav-pills mb-3 app-root-tabs" id="rootTabs">
            <li class="nav-item">
              <button class="nav-link active" data-root="docs">
                <i class="bi bi-file-earmark-text me-1"></i>docs
              </button>
            </li>
            <li class="nav-item">
              <button class="nav-link" data-root="mips">
                <i class="bi bi-cpu me-1"></i>mips
              </button>
            </li>
            <li class="nav-item">
              <button class="nav-link" data-root="python">
                <i class="bi bi-code-slash me-1"></i>python
              </button>
            </li>
          </ul>

          <div id="tree-container" class="app-tree small">
            <!-- JS injects tree -->
          </div>

          <div id="search-results" class="mt-3 small d-none">
            <div class="fw-semibold mb-1">Search results</div>
            <ul
              class="list-group list-group-flush app-search-list"
              id="search-list"
            ></ul>
          </div>
        </div>

        <!-- Right column: dynamic content -->
        <div class="col-12 col-lg-9">
          <div id="content-area" class="fade-in">
            <!-- JS fills: overview or 4-pane project view -->
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <!-- OneCompiler is used via iframe only -->
    <script src="app.js"></script>

    <script src="https://formspree.io/js/formbutton-v1.min.js" defer></script>
    <script>
      window.formbutton =
        window.formbutton ||
        function () {
          (formbutton.q = formbutton.q || []).push(arguments);
        };

      formbutton("create", {
        action: "https://formspree.io/f/mdalwknz",
        title: "Contact Manish",
        description:
          "Questions, feedback, or collaboration ideas on these projects?",
        styles: {
          fontFamily:
            '"system-ui", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',
          button: {
            background: "#6366f1",
            borderRadius: "999px",
          },
          title: {
            background: "#6366f1",
            letterSpacing: "0.08em",
            textTransform: "uppercase",
          },
        },
        fields: [
          {
            name: "name",
            type: "text",
            label: "Your Name",
            required: true,
            styles: {
              input: {
                borderRadius: "1rem",
                borderColor: "#d1d5db",
                borderWidth: "1px",
                borderStyle: "solid",
              },
            },
          },
          {
            name: "email",
            type: "email",
            label: "Your Email",
            required: true,
            styles: {
              input: {
                borderRadius: "1rem",
                borderColor: "#d1d5db",
                borderWidth: "1px",
                borderStyle: "solid",
              },
            },
          },
          {
            name: "message",
            type: "textarea",
            label: "Message",
            required: true,
            styles: {
              input: {
                borderRadius: "1rem",
                borderColor: "#d1d5db",
                borderWidth: "1px",
                borderStyle: "solid",
              },
            },
          },
          { name: "submit", type: "submit", label: "Send Message" },
        ],
      });
    </script>
    <script>
      // ---- Feedback rate limit: 2 submissions per 48 hours ----

      const FEEDBACK_KEY = "mk_feedback_timestamps";
      const WINDOW_MS = 48 * 60 * 60 * 1000; // 48 hours
      const MAX_SUBMISSIONS = 2;

      function loadFeedbackTimestamps() {
        try {
          const raw = localStorage.getItem(FEEDBACK_KEY);
          if (!raw) return [];
          const arr = JSON.parse(raw);
          const now = Date.now();
          // keep only entries within last 48h
          return arr.filter((ts) => now - ts < WINDOW_MS);
        } catch {
          return [];
        }
      }

      function saveFeedbackTimestamps(arr) {
        try {
          localStorage.setItem(FEEDBACK_KEY, JSON.stringify(arr));
        } catch {
          // ignore storage errors
        }
      }

      function canSubmitFeedback() {
        const arr = loadFeedbackTimestamps();
        return arr.length < MAX_SUBMISSIONS;
      }

      function recordFeedbackSubmission() {
        const arr = loadFeedbackTimestamps();
        arr.push(Date.now());
        saveFeedbackTimestamps(arr);
      }

      // For inline form (if you have one with id="feedback-form")
      document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("feedback-form");
        if (form) {
          form.addEventListener("submit", (e) => {
            if (!canSubmitFeedback()) {
              e.preventDefault();
              alert(
                "You’ve already sent 2 feedback messages in the last 48 hours. Please try again later.",
              );
              return;
            }
            // let the form submit; after a short delay record it
            setTimeout(recordFeedbackSubmission, 500);
          });
        }
      });
    </script>
  </body>
</html>
